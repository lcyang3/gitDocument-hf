!function(t){if(!t.appConfig.loading)var a=$.dialog();var e=t.router;$("header .header-left").addClass("hidden"),$("footer.index-list").removeClass("hidden"),$("footer.searchList").addClass("hidden"),animate.animateText($("header span.title"),"订票、退票/改签","fadeIn"),artTemplate.loadTemplate("","order/order",{});var i=t.appParam.orderCurrItem||$("#order .tab-list .tab-li.active").attr("data-target");$("#order .tab-list .tab-li.active").removeClass("active"),$("#order .tab-list .tab-li[data-target='"+i+"']").addClass("active"),$("#order .tab-content .tab-content-box[data-target='"+i+"']").removeClass("hidden"),$("#order .tab-list .flag-active").css("left",$("#order .tab-list .tab-li.active").offset().left),$("#order .tab-list .flag-active").removeClass("hidden"),$("body").off("click","#order .tab-list .tab-li").on("click","#order .tab-list .tab-li",function(){var a=$.dialog(),e=$(this).attr("data-target");e!==i&&($("#order .tab-list .tab-li.active").removeClass("active"),$(this).addClass("active"),$("#order .tab-content .tab-content-box[data-target='"+i+"']").addClass("hidden"),$("#order .tab-content .tab-content-box[data-target='"+e+"']").removeClass("hidden"),$("#order .tab-list .flag-active").css("left",$("#order .tab-list .tab-li.active").offset().left),i=e),a.close(),t.appParam.orderCurrItem=i}),$("body").off("click","#order .history .history-clear").on("click","#order .history .history-clear",function(){$(this).parents("p").remove()}),$("body").off("click","a[data-name='flight-search']").on("click","a[data-name='flight-search']",function(){$(this).attr("data-title","北京-杭州"),t.appParam.orderSearchParam={startStation:"北京",endStation:"杭州",startTime:"2017-07-19",endTime:"2017-07-22"},e.on("order/searchList",function(){t.directorFn("order/searchList")}),t.forwardFlag=!0,t.forward($(this).attr("data-href"))});var d=new Date;d.setDate((new Date).getDate()+1),$("input[data-ele='input'][data-type='time'][data-id='startTime']").val(tools.formatTime(d,"yyyy年M月dd日")),$("input[data-ele='input'][data-type='time'][data-id='startTime']").attr("data-time",tools.formatTime(d,"yyyy-MM-dd")),$("body").off("click","input[data-ele='input'][data-type='time']").on("click","input[data-ele='input'][data-type='time']",function(){var t="order-timebox",a=$(this).attr("data-id");$("body").append(template("base/time",{id:t,_data_id:a,currYear:(new Date).getFullYear(),currMonth:(new Date).getMonth()+1,currDay:(new Date).getDate(),currTime:tools.formatTime(new Date,"yyyy-MM-dd"),startTime:$("input[data-id='startTime']").attr("data-time")||"",endTime:$("input[data-id='endTime']").attr("data-time")||""})),setTimeout(function(){$("#"+t).css("top",0)},100)}),$("body").off("click",".time-box header span[data-id='close']").on("click",".time-box header span[data-id='close']",function(){var t=$(this).parents(".time-box");t.css("top","100%"),setTimeout(function(){$(t).remove()},300)}),$("body").off("click","input[data-ele='input'][data-type='address']").on("click","input[data-ele='input'][data-type='address']",function(){var t="order-addressbox",a=$(this).attr("data-id");$("body").append(template("base/address",{id:t,_data_id:a,gps:"广州",history:["北京","上海","广州","长沙"],hot:["北京","上海","广州","长沙"],_city_domestic:City.domestic,_city_international:City.international})),setTimeout(function(){$("#"+t).css("top",0)},100)}),$("body").off("click",".address-box header span[data-id='close']").on("click",".address-box header span[data-id='close']",function(){var t=$(this).parents(".address-box");t.css("top","100%"),setTimeout(function(){$(t).remove()},300)}),$("body").off("click","#order-timebox .month-box .days .days-item:not(.disable)").on("click","#order-timebox .month-box .days .days-item:not(.disable)",function(){var t=$(this).parents("#order-timebox"),a=$(this).find(".day").attr("data-time"),e=$("#order-timebox .days-item.start .day").attr("data-time"),i=$("#order-timebox .days-item.end .day").attr("data-time");if("startTime"==t.attr("data-type")){if(i&&new Date(a).getTime()>=new Date(i).getTime())return void $.dialog({content:"去程日期必须小于返程日期",title:"alert",time:1e3});e&&new Date(a).getTime()==new Date(e).getTime()?($("input[data-id='startTime']").val(""),$("input[data-id='startTime']").attr("data-time","")):($("input[data-id='startTime']").val(tools.formatTime(new Date(a),"yyyy年M月dd日")),$("input[data-id='startTime']").attr("data-time",a))}else{if(e&&new Date(a).getTime()<=new Date(e).getTime())return void $.dialog({content:"返程日期必须大于去程日期",title:"alert",time:1e3});i&&new Date(a).getTime()==new Date(i).getTime()?($("input[data-id='endTime']").val(""),$("input[data-id='endTime']").attr("data-time","")):($("input[data-id='endTime']").val(tools.formatTime(new Date(a),"yyyy年M月dd日")),$("input[data-id='endTime']").attr("data-time",a))}t.css("top","100%"),setTimeout(function(){t.remove()},300)}),t.appParam.orderCurrItem=i,t.appConfig.loading||a.close(),t.appConfig.loading.close()}(hf);