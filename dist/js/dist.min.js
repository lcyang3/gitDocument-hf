!function(e,t){function a(){var a=s.getBoundingClientRect().width;t||(t=540),a>t&&(a=t);var n=100*a/e;if(o="html{font-size:"+n+"px !important}",r=document.getElementById("rootsize")||document.createElement("style"),document.getElementById("rootsize")||(document.getElementsByTagName("head")[0].appendChild(r),r.id="rootsize"),r.styleSheet)r.styleSheet.disabled||(r.styleSheet.cssText=o);else try{r.innerHTML=o}catch(e){r.innerText=o}s.style.fontSize=n+"px"}var n,r,o,i=document,d=window,s=i.documentElement;a(),d.addEventListener("resize",function(){clearTimeout(n),n=setTimeout(a,300)},!1),d.addEventListener("pageshow",function(e){e.persisted&&(clearTimeout(n),n=setTimeout(a,300))},!1),"complete"===i.readyState?i.body.style.fontSize="16px":i.addEventListener("DOMContentLoaded",function(e){i.body.style.fontSize="16px"},!1)}(720,1500);var tools={formatTime:function(e,t){var a=e,n=function(e,t){t||(t=2),e=String(e);for(var a=0,n="";a<t-e.length;a++)n+="0";return n+e};return t.replace(/"[^"]*"|'[^']*'|\b(?:d{1,4}|m{1,4}|yy(?:yy)?|([hHMstT])\1?|[lLZ])\b/g,function(e){switch(e){case"d":return a.getDate();case"dd":return n(a.getDate());case"ddd":return["Sun","Mon","Tue","Wed","Thr","Fri","Sat"][a.getDay()];case"dddd":return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a.getDay()];case"ddCh":return["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][a.getDay()];case"M":return a.getMonth()+1;case"MM":return n(a.getMonth()+1);case"MMM":return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()];case"MMMM":return["January","February","March","April","May","June","July","August","September","October","November","December"][a.getMonth()];case"yy":return String(a.getFullYear()).substr(2);case"yyyy":return a.getFullYear();case"h":return a.getHours()%12||12;case"hh":return n(a.getHours()%12||12);case"H":return a.getHours();case"HH":return n(a.getHours());case"m":return a.getMinutes();case"mm":return n(a.getMinutes());case"s":return a.getSeconds();case"ss":return n(a.getSeconds());case"l":return n(a.getMilliseconds(),3);case"L":var t=a.getMilliseconds();return t>99&&(t=Math.round(t/10)),n(t);case"tt":return a.getHours()<12?"am":"pm";case"TT":return a.getHours()<12?"AM":"PM";case"Z":return a.toUTCString().match(/[A-Z]+$/);default:return e.substr(1,e.length-2)}})}},artTemplate={loadTemplate:function(e,t,a,n){var r=this;e?r.getData(e,t,a,n):r.renderTpl(t,a,n)},getData:function(e,t,a,n){var r=this;$.ajax({type:"GET",url:e,data:a,dataType:"json",success:function(e,a,o){200!=o.status||"0000"!=e.code?alert("请求失败"):(initData=e,r.renderTpl(t,initData,n))}})},renderTpl:function(e,t,a){var n=template(e,t);$(".template-main").addClass("animated fadeIn"),$(".template-main").html(n),setTimeout(function(){$(".template-main").removeClass("animated fadeIn")},200),a&&"function"==typeof a&&a()},loadJs:function(e){var t="./dist/pagejs/"+e+".min.js";$.ajax({url:t,dataType:"script",cache:!0})}},animate={animated:function(e,t){t&&"function"==typeof t?e.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",t()):console.error("error:animated 请传递_callback:function")},animateText:function(e,t,a,n){e.html(""),e.addClass("animated "+a),e.html(t),setTimeout(function(){e.removeClass("animated "+a)},500),n&&"function"==typeof n&&n()}},hf=function(){var e=["#order/order","#flight/flight","#personal/personal"],t=["#base/404","#base/500"];return{router:{},appParam:{},appConfig:{beforeUrl:"#order/order"},forwardFlag:!1,myDropload:null,init:function(){var t=this;window.addEventListener("load",function(){FastClick.attach(document.body),$("body").on("click",".hf-back",function(){t.back()}),t.loadEven(),window.history&&window.history.pushState&&$(window).on("popstate",function(){var a=window.location.hash;t.forwardFlag||-1!==e.indexOf(a)&&console.info("1"),t.forwardFlag=!1}),t.dropload()},!1)},back:function(){var e=window.location.hash;-1===t.indexOf(e)?history.back():window.location.href="#order/order"},loadEven:function(){var e=this;$("body").off("click","footer.index-list ul li[data-ele='artTemplate']").on("click","footer.index-list ul li[data-ele='artTemplate']",function(){$("footer.index-list ul li.active").removeClass("active"),$(this).addClass("active"),e.forwardFlag=!0,e.forward($(this).attr("data-href"))})},forward:function(e,t){this.appConfig.beforeUrl=window.location.hash,window.location.href=e,t&&"function"==typeof t&&t()},director:function(e){var t=this,a={"base/404":function(){t.directorFn("base/404")},"base/500":function(){t.directorFn("base/500")},"personal/weixin":function(){t.directorFn("personal/weixin")}};$.each(e,function(){var e=this.substring(1);a[e]=function(){t.directorFn(e)}}),t.router=Router(a).configure({notfound:function(){t.forward("#base/404")}}),t.router.init("order/order")},directorFn:function(e){window.location.hash;var t=$("*[data-ele='artTemplate'][data-href='#"+e+"']");return t.parents("footer.index-list")&&($("footer.index-list ul li[data-ele='artTemplate'].active").removeClass("active"),$("footer.index-list ul li[data-ele='artTemplate'][data-href='#"+e+"']").addClass("active")),t.attr("data-title")&&animate.animateText($("header span.title"),t.attr("data-title"),"fadeIn"),artTemplate.loadJs(e),!1},dropload:function(){myDropload=$("#scroll").dropload({autoLoad:!1,scrollArea:window,loadUpFn:function(e){scroll(0,0),setTimeout(function(){var t=window.location.hash;artTemplate.loadJs(t.substring(1)),scroll(0,0),e.resetload()},1e3)},loadDownFn:""})}}}();window.hf=hf;